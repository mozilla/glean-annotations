{"android-places": {"metrics": {"places_manager.read_query_count": {"commentary": "Read and write success rates for the places store can be found in the bottom half of [STMO#fenix-logins-and-places-performance-metrics](https://sql.telemetry.mozilla.org/dashboard/fenix-logins-and-places-performance-metrics?p_org_mozilla_fenix=org_mozilla_firefox)\ud83d\udd12.\n\n[STMO#70709](https://sql.telemetry.mozilla.org/queries/70709?p_org_mozilla_fenix=org_mozilla_firefox#177931)\ud83d\udd12 is the main query that calculates the read success rates for the places store."}, "places_manager.read_query_error_count": {"commentary": "Read and write success rates for the places store can be found in the bottom half of [STMO#fenix-logins-and-places-performance-metrics](https://sql.telemetry.mozilla.org/dashboard/fenix-logins-and-places-performance-metrics?p_org_mozilla_fenix=org_mozilla_firefox)\ud83d\udd12.\n\n[STMO#70709](https://sql.telemetry.mozilla.org/queries/70709?p_org_mozilla_fenix=org_mozilla_firefox#177931)\ud83d\udd12 is the main query that calculates the read error rates for the places store."}, "places_manager.write_query_count": {"commentary": "Read and write success rates for the places store can be found in the bottom half of [STMO#fenix-logins-and-places-performance-metrics](https://sql.telemetry.mozilla.org/dashboard/fenix-logins-and-places-performance-metrics?p_org_mozilla_fenix=org_mozilla_firefox)\ud83d\udd12.\n\n[STMO#70709](https://sql.telemetry.mozilla.org/queries/70709?p_org_mozilla_fenix=org_mozilla_firefox#177931)\ud83d\udd12 is the main query that calculates the write success rates for the places store."}, "places_manager.write_query_error_count": {"commentary": "Read and write success and error rates for the places store can be found in the bottom half of [STMO#fenix-logins-and-places-performance-metrics](https://sql.telemetry.mozilla.org/dashboard/fenix-logins-and-places-performance-metrics?p_org_mozilla_fenix=org_mozilla_firefox)\ud83d\udd12.\n\n[STMO#70709](https://sql.telemetry.mozilla.org/queries/70709?p_org_mozilla_fenix=org_mozilla_firefox#177931)\ud83d\udd12 is the main query that calculates the write error rates for the places store."}}}, "engine-gecko": {"metrics": {"gfx.content.frame_time.reason": {"commentary": "This metric was impacted by [bug 1733757][bzbug] since at least March 2020.\nThe bug resulted in data not being collected after a certain point.\nThe data collected up to this point was correctly stored and eventually sent.\n\nThe bug was fixed in Glean v42.0.1 and shipped in Fenix Nightly 2021-10-13 and Fenix Beta 94.0.0-beta.3 (2021-10-13).\nData from clients with the fixed Glean version is likely to report higher values for this metric.\n\nAll details can be found in the [data incident report][report].\n\n[bzbug]: https://bugzilla.mozilla.org/show_bug.cgi?id=1733757\n[report]: https://docs.google.com/document/d/14FWle43oHbDqJUoLBuV7-rEpR0rQyO1caC5j69fRZr8/"}}}, "fenix": {"app": {"featured": true, "logo": "https://raw.githubusercontent.com/mozilla/protocol-assets/main/logos/firefox/browser/logo.svg", "tags": ["Android"]}, "metrics": {"browser.search.in_content": {"commentary": "Around the mid January 2021 for Nightly/Beta and end January 2021 for Release, telemetry was implemented for Google topsite tile.\n\nThis implementation leads to the increase in both the `tagged_sap` and `tagged_follow_on` and drop in `organic` in the `mobile_search_clients_daily` (hence all tables based on it). You can see [STMO#79738](https://sql.telemetry.mozilla.org/queries/79738/source#198048)\ud83d\udd12 the increase in `tagged_rate`."}, "context_menu.item_tapped": {"commentary": "This event captures the user actions on the event where a user long presses on a link or image. See picture below:\n\n![Screenshot_20211201-160642](https://user-images.githubusercontent.com/20569/144314748-f22469f9-d04f-4ddf-954f-a7a697563aae.png)"}, "events.default_browser_changed": {"commentary": "This event records only when Fenix recognizes that the default browser changed to _Fenix_. We can reliably use this event to understand the occurrence of setting Fenix to the default browser.\n\nSee the [event recording code](https://github.com/mozilla-mobile/fenix/blob/6913cd59c9429df6a44cfcc544c9b511c026a134/app/src/main/java/org/mozilla/fenix/HomeActivity.kt#L369), and [associated gating function](https://github.com/mozilla-mobile/fenix/blob/dda6719c32dd8ecdeb7d8516716711dd0018f25a/app/src/main/java/org/mozilla/fenix/utils/Settings.kt#L551)."}, "home_screen.home_screen_displayed": {"commentary": "# Instrumentation Notes:\n\n- This event is recorded regardless of whether PBM is enabled or not whenever the home screen is displayed."}, "home_screen.home_screen_view_count": {"commentary": "# Instrumentation Notes:\n\n- This counter is incremented regardless of whether PBM is active or not"}, "metrics.font_list_json": {"commentary": "Text metrics are _required_ to be `web_activity` or `highly_sensitive`, so even though this is more like `technical` (per the Data Review), it is marked as `highly_sensitive`."}, "metrics.search_count": {"commentary": "Possible values for search_count 'type':\n\n- `action`: User typed the full query and searched through the toolbar (hit enter)\n- `suggestion`: User typed a query and searched by selecting a search suggestion in the awesomebar\n- `widget`: User started the search from the home screen widget\n- `shortcut`: User started a search using a shortcut on the home screen\n- `topsite`: User started the search by first navigating using a topsite (for google and follow on searches only)"}, "metrics.tab_view_setting": {"commentary": "An example query showing the values sent for this metric in the last 28 days can be found in [STMO#79505](https://sql.telemetry.mozilla.org/queries/79505/source)\ud83d\udd12.\nAs of this writing (Apr 21, 2021), this metric will often be sent as null due to an implementation issue:\nsee [mozilla-mobile/fenix#19147](https://github.com/mozilla-mobile/fenix/issues/19147) for details."}, "perf.startup.startup_type": {"commentary": "See [\ud83d\udd12 this\nreport](https://docs.google.com/document/d/1nLe7hIe2HoybuPiZzKXjuN97ssgmJq96p1AF9lMo2NA/edit#)\nfor an analysis of this probe's data from a performance perspective."}, "preferences.open_links_in_a_private_tab": {"warning": "This metric should not be used. See the commentary for details.", "commentary": "This metric has been replaced by `preferences.open_links_in_private` and should not be used.\nIt will often be sent as null due to an implementation issue: see [mozilla-mobile/fenix#19147](https://github.com/mozilla-mobile/fenix/issues/19147) for details."}, "preferences.open_links_in_app": {"warning": "This metric should not be used. See the commentary for details.", "commentary": "This metric has been replaced by `preferences.open_links_in_app_enabled` and should not be used.\nIt will often be sent as null due to an implementation issue: see [mozilla-mobile/fenix#19147](https://github.com/mozilla-mobile/fenix/issues/19147) for details."}, "preferences.remote_debugging": {"warning": "This metric should not be used. See the commentary for details.", "commentary": "This metric has been replaced by `preferences.remote_debugging_enabled` and should not be used.\nIt will often be sent as null due to an implementation issue: see [mozilla-mobile/fenix#19147](https://github.com/mozilla-mobile/fenix/issues/19147) for details."}, "preferences.search_bookmarks": {"warning": "This metric should not be used. See the commentary for details.", "commentary": "This metric has been replaced by `preferences.bookmarks_suggestion` and should not be used.\nIt will often be sent as null due to an implementation issue: see [mozilla-mobile/fenix#19147](https://github.com/mozilla-mobile/fenix/issues/19147) for details."}, "preferences.search_browsing_history": {"warning": "This metric should not be used. See the commentary for details.", "commentary": "This metric has been replaced by `preferences.browsing_history_suggestion` and should not be used.\nIt will often be sent as null due to an implementation issue: see [mozilla-mobile/fenix#19147](https://github.com/mozilla-mobile/fenix/issues/19147) for details."}, "preferences.search_suggestions_private": {"warning": "This metric should not be used. See the commentary for details.", "commentary": "This metric has been replaced by `preferences.private_search_suggestions` and should not be used.\nIt will often be sent as null due to an implementation issue: see [mozilla-mobile/fenix#19147](https://github.com/mozilla-mobile/fenix/issues/19147) for details."}, "preferences.show_clipboard_suggestions": {"warning": "This metric should not be used. See the commentary for details.", "commentary": "This metric has been replaced by `preferences.clipboard_suggestions_enabled` and should not be used.\nIt will often be sent as null due to an implementation issue: see [mozilla-mobile/fenix#19147](https://github.com/mozilla-mobile/fenix/issues/19147) for details."}, "preferences.show_search_shortcuts": {"warning": "This metric should not be used. See the commentary for details.", "commentary": "This metric has been replaced by `preferences.search_shortcuts_enabled` and should not be used.\nIt will often be sent as null due to an implementation issue: see [mozilla-mobile/fenix#19147](https://github.com/mozilla-mobile/fenix/issues/19147) for details."}, "preferences.show_search_suggestions": {"warning": "This metric should not be used. See the commentary for details.", "commentary": "This metric has been replaced by `preferences.search_suggestions_enabled` and should not be used.\nIt will often be sent as null due to an implementation issue: see [mozilla-mobile/fenix#19147](https://github.com/mozilla-mobile/fenix/issues/19147) for details."}, "preferences.show_voice_search": {"warning": "This metric should not be used. See the commentary for details.", "commentary": "This metric has been replaced by `preferences.voice_search_enabled` and should not be used.\nIt will often be sent as null due to an implementation issue: see [mozilla-mobile/fenix#19147](https://github.com/mozilla-mobile/fenix/issues/19147) for details."}, "preferences.sync": {"warning": "This metric should not be used. See the commentary for details.", "commentary": "This metric has been replaced by `preferences.signed_in_sync` and should not be used.\nIt will often be sent as null due to an implementation issue: see [mozilla-mobile/fenix#19147](https://github.com/mozilla-mobile/fenix/issues/19147) for details."}, "preferences.telemetry": {"warning": "This metric should not be used. See the commentary for details.", "commentary": "This metric has been replaced by `preferences.telemetry_enabled` and should not be used.\nIt will often be sent as null due to an implementation issue: see [mozilla-mobile/fenix#19147](https://github.com/mozilla-mobile/fenix/issues/19147) for details."}, "preferences.theme": {"warning": "This metric should not be used. See the commentary for details.", "commentary": "This metric has been replaced by `preferences.user_theme` and should not be used.\nIt will often be sent as null due to an implementation issue: see [mozilla-mobile/fenix#19147](https://github.com/mozilla-mobile/fenix/issues/19147) for details."}, "preferences.toolbar_position": {"warning": "This metric should not be used. See the commentary for details.", "commentary": "This metric has been replaced by `preferences.toolbar_position_setting` and should not be used.\nIt will often be sent as null due to an implementation issue: see [mozilla-mobile/fenix#19147](https://github.com/mozilla-mobile/fenix/issues/19147) for details."}, "preferences.tracking_protection": {"warning": "This metric should not be used. See the commentary for details.", "commentary": "This metric has been replaced by `preferences.enhanced_tracking_protection` and should not be used.\nIt will often be sent as null due to an implementation issue: see [mozilla-mobile/fenix#19147](https://github.com/mozilla-mobile/fenix/issues/19147) for details."}, "recent_tabs.in_progress_media_tab_opened": {"commentary": "There are two types of tabs that show up in the recent tabs section on the Fenix home screen:\ntabs that have media in progress and recently used tabs.\nThis metric is used to collect info about how many users are opening a tab they have recently played media in."}, "recent_tabs.recent_tab_opened": {"commentary": "There are two types of tabs that show up in the recent tabs section on the Fenix home screen:\ntabs that have media in progress and recently used tabs.\nThis metric is used to collect info about how many users are opening a tab they have recently used."}, "recent_tabs.show_all_clicked": {"commentary": "There are two types of tabs that show up in the recent tabs section on the Fenix home screen:\ntabs that have media in progress and recently used tabs.\nA user can choose to open one of those tabs, or can choose to see a list with all opened tabs.\nThis metric is used to collect info about how many users are choosing to open that list from the recent tabs section."}}, "pings": {"installation": {"commentary": "As per the [data review issue][review], expiry occured on 2020-09-01.\n[Ping counts][plot] show that the number of installation pings falls precipitously across all app variants around July 2020.\nThis ping is not recommended for general analysis past 2020-09-01.\n\n[review]: https://github.com/mozilla-mobile/fenix/pull/8074\n[plot]: [STMO#80027](https://sql.telemetry.mozilla.org/queries/80027/source#198690)\ud83d\udd12"}, "topsites-impression": {"commentary": "# Instrumentation Notes:\n\n- Topsites Impression pings are not sent in Private Browsing Mode since tiles are not shown when opening the homepage in this mode, thus there are no impressions to record."}}}, "firefox_desktop": {"app": {"featured": true, "logo": "https://raw.githubusercontent.com/mozilla/protocol-assets/main/logos/firefox/browser/logo.svg"}, "metrics": {"messaging_system.client_id": {"commentary": "IMPORTANT NOTE: this is the [legacy telemetry client ID](https://dictionary.telemetry.mozilla.org/apps/firefox_desktop/metrics/legacy_telemetry_client_id),\nnot the [Glean client ID](https://dictionary.telemetry.mozilla.org/apps/firefox_desktop/metrics/client_id).\nAs a result, when wishing to`JOIN` `messaging_system` and `onboarding` with other tables, it will be necesssary to `JOIN` on\n`metrics.uuid.legacy_telemetry_client_id` (or, in Looker, to use `legacy.telemetry.client_id`)\n\nNote that this `client_id` may or may not be present in all cases. Here is [the policy code](https://searchfox.org/mozilla-central/search?q=symbol:TelemetryFeed%23createASRouterEvent&redirect=true) that applies per-surface policies to telemetry which regulate the contents of `client_id` (and certain other metrics)."}, "messaging_system.event": {"commentary": "When `messaging_system.message_id` is `MR_WELCOME_DEFAULT` counts of `event` with value `SESSION_END`\nare a little low, especially if looking at upgrading populations (see\n[bug 1851034](https://bugzilla.mozilla.org/show_bug.cgi?id=1851034))."}, "newtab.sov_allocation": {"commentary": "\"sov\" is an acronym which here means \"Share of Voice\"."}, "pocket.impression": {"commentary": "Until Beta 107, this event incorrectly only reports `\"false\"` for `is_sponsored`."}, "pocket.save": {"commentary": "Until Beta 107, this event incorrectly only reports `\"false\"` for `is_sponsored`."}, "urlbar.engagement": {"commentary": "**Question 1:** When an engagement event is sent, regardless of engagement_type, does the urlbar menu of results collapse so that the user has to start over in a new search?\n\n**Answer 1:** It depends on the engagement. The results panel remains open when these engagement types occur: dismiss, inaccurate_location, not_interested, not_relevant, show_less_frequently\n  Of those types, not only does the panel stay open, the suggestion also remains present for the following: inaccurate_location, show_less_frequently\n  That means it's possible for more than one engagement to occur with a suggestion while the panel remains open. e.g., `inaccurate_location` followed by `click`, or `show_less_frequently` followed by `not_interested`.\n  For all other engagement types not listed above, the results panel closes.\n\n**Question 2:** What is the difference between `selected_result='addon'` and `selected_result='addon_experimental'`? Why is `addon_experimenntal` a valid value for `selected_result`, but not in the `results` string?\n\n**Answer 2:** `addon`: Used for extensions that use the [omnibox WebExtensions API](https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/API/omnibox). There are a number of these out in the wild, so this value will show up in the data occasionally.\n  `experimental_addon`: Used for extensions created by the Firefox Search Engineering Team using the experimental urlbar WebExtensions API. We don\u2019t actually use this API anymore or create extensions with it. It\u2019s how we used to implement experiments several years ago. No plans to start using it again. Should not appear in the data.\n\n**Question 3:** What is the difference between `suggest_sponsor` vs (`merino_adm_sponsored` + `rs_adm_sponsored`)?\n\n**Answer 3:** `suggest_sponsor` is on Firefox 113 and earlier and includes sponsored suggestions from both Merino and remote settings. In 114, `suggest_sponsor` was replaced with `merino_adm_sponsored` and `rs_adm_sponsored`, which break out the suggestion source, either Merino or remote settings.\n\n**Question 4:** What is the difference between `suggest_non_sponsor` vs (`merino_wikipedia` + `rs_adm_nonsponsored`)?\n\n**Answer 4:** `suggest_non_sponsor` is on Firefox 113 and earlier and includes non-sponsored suggestions (a.k.a. \"expanded Wikipedia\") from both Merino and remote settings. In 114, `suggest_non_sponsor` was replaced with `merino_adm_nonsponsored` and `rs_adm_nonsponsored`. In all cases, \"non-sponsored\" means expanded Wikipedia.\n  `merino_wikipedia` is dynamic Wikipedia. There is no `rs_` version because by their nature these suggestions are provided only by Merino.\n\n**Question 5:** What does `merino_top_picks` mean?\n\n**Answer 5:** In Firefox 114+, it refers to navigational suggestions.\n\n**Question 6:** How do we identify Dynamic Wikipedia suggestions?\n\n**Answer 6:** Dynamic Wikipedia was recorded as `dynamic_wikipedia` in 113, which is the version that the dynamic Wikipedia experiment targeted. In 114 and later, it's recorded as `merino_wikipedia`. \n\n**Question 7:** How does the search session end for each `engagement_type` value?\n\n**Answer 7:**\n- For `click`, `enter`, `go_button`: the user has selected one of the results displayed in the panel. The panel closes and the selected result page loads.\n- For `drop_go`, `paste_go`: the user has dropped or pasted text into the URLbar\n  and immediately navigated to it (either a URL, or a SERP if the text was interpreted as a search query). The results panel did not open and no results were shown. The `selected_result` type is `input_field`.\n- For `help`: the user has selected \"Learn More\" from the meatball menu next to one of the results displayed in the panel. The panel closes and a support page loads.\n- For `dismiss`,  `not_interested`, `not_relevant`: the user has selected an option from the meatball menu next to one of the results displayed in the panel. The panel stays open. The affected result is removed from the panel, but the current search string and other results remain in view. The search session has not ended.\n- For `inaccurate_location`, `show_less_frequently`: the user has selected an option from the meatball menu next to one of the results displayed in the panel. The panel stays open, and the current search string and all results remain in view. The search session has not ended.\n\n\n| Date       | Note   |\n| ---------- | ------ |\n| 2024-03-19 | The urlbar event telemetry was rolled out worldwide. Initially, it was only enabled in the US. You may see a spike in the volume of urlbar events as a result. |"}}, "pings": {"fog-validation": {"commentary": "Analyses for this ping include:\n* Validating that FOG is behaving well\n  in [bug 1651110](https://bugzilla.mozilla.org/show_bug.cgi?id=1651110)\n* Validating that Glean client_ids behave similarly to Firefox Telemetry client_ids\n  in [bug 1678146](https://bugzilla.mozilla.org/show_bug.cgi?id=1678146)"}, "messaging-system": {"commentary": "The following is a detailed overview of the different kinds of data we collect\nin the Messaging System and the New Tab Page.\n\n# Messaging System pings\n\nThese pings record impressions and user interactions for messages served by the\nMessaging System.\n\n## Important `client_id` note\nAll uses of `client_id` in this documentation refer to [`messaging_system_client_id`](https://dictionary.telemetry.mozilla.org/apps/firefox_desktop/metrics/messaging_system_client_id), which is (usually) a copy of \n[`legacy telemetry client ID`](https://dictionary.telemetry.mozilla.org/apps/firefox_desktop/metrics/legacy_telemetry_client_id),\nnot the [`Glean client ID`](https://dictionary.telemetry.mozilla.org/apps/firefox_desktop/metrics/client_id).\nAs a result, when wishing to `JOIN` `messaging_system` and `onboarding` with other tables, it will be necessary to `JOIN` on\n`metrics.uuid.legacy_telemetry_client_id` (or, in Looker, to use `legacy.telemetry.client_id`)\n\n## Moments page pings\n\nThis records when a moments page message has set the user preference for\n`browser.startup.homepage_override.once`. Its telemetry policy excludes\n`message_id` and `client_id` for Release channel users.\n\n```js\n// Release channel\n{\n  \"action\": \"cfr_user_event\"\n  \"addon_version\": \"20200225022813\"\n  \"bucket_id\": \"WNP_THANK_YOU\"\n  \"event\": \"MOMENTS_PAGE_SET\"\n  \"impression_id\": \"{d85d2268-b751-9543-b6d7-aad523bf2b26}\"\n  \"experiments\": {\n    \"experiment_1\": {\"branch\": \"control\"},\n    \"experiment_2\": {\"branch\": \"treatment\"}\n  },\n  \"locale\": \"en-US\"\n  \"message_id\": \"n/a\"\n  \"source\": \"CFR\"\n}\n\n// Prerelease channels and experiment audiences\n{\n  \"source\": \"CFR\",\n  \"message_id\": \"WNP_THANK_YOU\",\n  \"bucket_id\": \"WNP_THANK_YOU\",\n  \"event\": \"MOMENTS_PAGE_SET\",\n  \"addon_version\": \"20200225022813\",\n  \"experiments\": {\n    \"experiment_1\": {\"branch\": \"control\"},\n    \"experiment_2\": {\"branch\": \"treatment\"}\n  },\n  \"locale\": \"en-US\",\n  \"client_id\": \"21dc1375-b24e-984b-83e9-c8a9660ae4ff\"\n}\n```\n\n## InfoBar pings\n\nThis records when the user interacts with an infobar message (messaging row\nbetween the toolbars and the content area). `client_id` is recorded in all\nchannels.\n\n```js\n{\n  \"experiments\": {\n    \"exp1\": {\n      \"branch\": \"treatment-a\"\n    }\n  },\n  \"addon_version\": \"20210115035053\",\n  \"release_channel\": \"release\",\n  \"locale\": \"en-US\",\n  \"event\": [\n    \"IMPRESSION\",\n    \"CLICK_PRIMARY_BUTTON\",\n    \"CLICK_SECONDARY_BUTTON\",\n    \"DISMISSED\"\n  ],\n  \"client_id\": \"c4beb4bf-4feb-9c4e-9587-9323b28c2e50\",\n  \"version\": \"86\",\n  \"message_id\": \"INFOBAR_ACTION_86\",\n  \"browser_session_id\": \"93714e76-9919-ca49-b697-5e7c09a1394f\"\n}\n```\n\n## Spotlight pings\n\nThis records impressions and interactions for Spotlight messages. `client_id` is\nrecorded in all channels.\n\n```js\n{\n  \"experiments\": {\n    \"exp1\": {\n      \"branch\": \"treatment-a\"\n    }\n  },\n  \"addon_version\": \"20210115035053\",\n  \"release_channel\": \"release\",\n  \"locale\": \"en-US\",\n  \"event\": [\"IMPRESSION\" | \"CLICK\" | \"DISMISS\"],\n  \"client_id\": \"c4beb4bf-4feb-9c4e-9587-9323b28c2e50\",\n  \"version\": \"93\",\n  \"message_id\": \"SPOTLIGHT_MESSAGE_93\",\n  \"browser_session_id\": \"93714e76-9919-ca49-b697-5e7c09a1394f\"\n}\n```\n\n## ToastNotification pings\n\nThis records when the user interacts with a toast notification: an OS-level\ntoast notification UI affordance or a pop-up OS-level window. `client_id` is\nrecorded in all channels. Currently this is only used in experiments.\n\n```js\n{\n  \"experiments\": {\n    \"exp1\": {\n      \"branch\": \"treatment-a\"\n    }\n  },\n  \"addon_version\": \"20210115035053\",\n  \"release_channel\": \"release\",\n  \"locale\": \"en-US\",\n  \"event\": [\"IMPRESSION\"],\n  \"client_id\": \"c4beb4bf-4feb-9c4e-9587-9323b28c2e50\",\n  \"version\": \"86\",\n  \"message_id\": \"TOAST_NOTIFICATION_EXAMPLE_ID\",\n  \"browser_session_id\": \"93714e76-9919-ca49-b697-5e7c09a1394f\"\n}\n```\n\n## Contextual Feature Recommendation (CFR) pings\n\n### CFR impressions\n\nA CFR impression ping has two forms: one for release channels and private\nbrowsing windows that excludes `client_id` to comply with our data collection\npolicy, and another for prerelease channels and experiments that includes it.\n\n#### CFR impression for all the prerelease channels and shield experiment\n\n```js\n{\n  \"client_id\": \"26288a14-5cc4-d14f-ae0a-bb01ef45be9c\",\n  \"action\": \"cfr_user_event\",\n  \"impression_id\": \"n/a\",\n  \"addon_version\": \"20180710100040\",\n  \"locale\": \"en-US\",\n  \"experiments\": {\n    \"experiment_1\": { \"branch\": \"control\" },\n    \"experiment_2\": { \"branch\": \"treatment\" }\n  },\n  \"source\": \"CFR\",\n  // message_id could be the ID of the recommendation, such as \"wikipedia_addon\"\n  \"message_id\": \"wikipedia_addon\",\n  \"event\": \"IMPRESSION\"\n}\n```\n\n#### CFR impression for the release channel and for private browsing windows\n\n```js\n{\n  \"client_id\": \"n/a\",\n  \"action\": \"cfr_user_event\",\n  \"impression_id\": \"{005deed0-e3e4-4c02-a041-17405fd703f6}\",\n  \"addon_version\": \"20180710100040\",\n  \"locale\": \"en-US\",\n  \"experiments\": {\n    \"experiment_1\": { \"branch\": \"control\" },\n    \"experiment_2\": { \"branch\": \"treatment\" }\n  },\n  \"source\": \"CFR\",\n  // message_id should be a bucket ID in the release channel, we may not use the\n  // individual ID, such as addon ID, per legal's request\n  \"message_id\": \"bucket_id\",\n  \"event\": \"IMPRESSION\"\n}\n```\n\n### CFR interaction pings\n\nThis records the user's interaction with CFR messages.\n\n#### CFR interaction pings for all the prerelease channels and shield experiment\n\n```js\n{\n  \"client_id\": \"26288a14-5cc4-d14f-ae0a-bb01ef45be9c\",\n  \"action\": \"cfr_user_event\",\n  \"addon_version\": \"20180710100040\",\n  \"impression_id\": \"n/a\",\n  \"locale\": \"en-US\",\n  \"experiments\": {\n    \"experiment_1\": { \"branch\": \"control\" },\n    \"experiment_2\": { \"branch\": \"treatment\" }\n  },\n  \"source\": \"CFR\",\n  // message_id could be the ID of the recommendation, such as \"wikipedia_addon\"\n  \"message_id\": \"wikipedia_addon\",\n  \"event\": [\"IMPRESSION\" | \"INSTALL\" | \"PIN\" | \"BLOCK\" | \"DISMISS\" | \"RATIONALE\" | \"LEARN_MORE\" | \"CLICK\" | \"CLICK_DOORHANGER\" | \"MANAGE\"],\n  // \"modelVersion\" records the model identifier for the CFR machine learning experiment, see more detail in Bug 1594422.\n  // Non-experiment users will not report this field.\n  \"event_context\": \"{ \\\"modelVersion\\\": \\\"some_model_version_id\\\" }\"\n}\n```\n\n#### CFR interaction pings for release channel\n\n```js\n{\n  \"client_id\": \"n/a\",\n  \"action\": \"cfr_user_event\",\n  \"addon_version\": \"20180710100040\",\n  \"impression_id\": \"{005deed0-e3e4-4c02-a041-17405fd703f6}\",\n  \"locale\": \"en-US\",\n  \"experiments\": {\n    \"experiment_1\": { \"branch\": \"control\" },\n    \"experiment_2\": { \"branch\": \"treatment\" }\n  },\n  \"source\": \"CFR\",\n  // message_id should be a bucket ID in the release channel, we may not use the\n  // individual ID, such as addon ID, per legal's request\n  \"message_id\": \"bucket_id\",\n  \"event\": [\"IMPRESSION\" | \"INSTALL\" | \"PIN\" | \"BLOCK\" | \"DISMISS\" | \"RATIONALE\" | \"LEARN_MORE\" | \"CLICK\" | \"CLICK_DOORHANGER\" | \"MANAGE\"],\n}\n```\n\n### Targeting error pings\n\nThis records when an error has occurred when parsing/evaluating a JEXL targeting string in a message.\n\n```js\n{\n  \"client_id\": \"n/a\",\n  \"action\": \"asrouter_undesired_event\",\n  \"addon_version\": \"20180710100040\",\n  \"impression_id\": \"{005deed0-e3e4-4c02-a041-17405fd703f6}\",\n  \"locale\": \"en-US\",\n  \"experiments\": {\n    \"experiment_1\": { \"branch\": \"control\" },\n    \"experiment_2\": { \"branch\": \"treatment\" }\n  },\n  \"message_id\": \"some_message_id\",\n  \"event\": \"TARGETING_EXPRESSION_ERROR\",\n  \"event_context\": [\"MALFORMED_EXPRESSION\" | \"OTHER_ERROR\"]\n}\n```\n\n### Remote Settings error pings\n\nThis records a failure in the Remote Settings loader to load messages into the Messaging System.\n\n```js\n{\n  \"action\": \"asrouter_undesired_event\",\n  \"client_id\": \"n/a\",\n  \"addon_version\": \"20180710100040\",\n  \"locale\": \"en-US\",\n  \"experiments\": {\n    \"experiment_1\": { \"branch\": \"control\" },\n    \"experiment_2\": { \"branch\": \"treatment\" }\n  },\n  \"user_prefs\": 7,\n  \"event\": [\"ASR_RS_NO_MESSAGES\" | \"ASR_RS_ERROR\"],\n  // The value is set to the ID of the message provider. For example: remote-cfr, remote-onboarding, etc.\n  \"event_context\": \"REMOTE_PROVIDER_ID\"\n}\n```\n\n## CFR Toolbar Badge interaction pings\n\nThis records when a user has seen or clicked a CFR badge/notification in the\nbrowser toolbar in a non-PBM window.\n\n```js\n{\n  \"locale\": \"en-US\",\n  \"client_id\": \"9da773d8-4356-f54f-b7cf-6134726bcf3d\",\n  \"version\": \"70.0a1\",\n  \"release_channel\": \"default\",\n  \"addon_version\": \"20190712095934\",\n  \"action\": \"cfr_user_event\",\n  \"experiments\": {\n    \"experiment_1\": { \"branch\": \"control\" },\n    \"experiment_2\": { \"branch\": \"treatment\" }\n  },\n  \"source\": \"CFR\",\n  \"message_id\": \"FXA_ACCOUNTS_BADGE\",\n  \"event\": [\"CLICK\" | \"IMPRESSION\"]\n}\n```\n\n## Firefox Onboarding (about:welcome) pings\n\nThese record the telemetry metrics during the Firefox onboarding experience.\n\n### Onboarding impressions\n\n```js\n{\n  \"client_id\": \"26288a14-5cc4-d14f-ae0a-bb01ef45be9c\",\n  \"version\": \"76.0a1\",\n  \"locale\": \"en-US\",\n  \"experiments\": {},\n  \"release_channel\": \"default\",\n  \"addon_version\": \"20200330194034\",\n  \"message_id\": [\n    | \"DEFAULT_ABOUTWELCOME\"\n    | \"DEFAULT_ABOUTWELCOME_AW_GET_STARTED\"\n    | \"DEFAULT_ABOUTWELCOME_SITES\"\n    | \"DEFAULT_ABOUTWELCOME_AW_IMPORT_SETTINGS\"\n    | \"DEFAULT_ABOUTWELCOME_AW_CHOOSE_THEME\"\n    | \"RTAMO_DEFAULT_WELCOME\"\n  ],\n  \"event\": \"IMPRESSION\",\n  \"browser_session_id\": \"e7e52665-7db3-f348-9918-e93160eb2ef3\",\n  \"event_context\": { \"page\": \"about:welcome\" },\n  \"attribution\": {\n    \"source\": \"mozilla.org\",\n    \"medium\": \"referral\",\n    \"campaign\": \"Firefox-Brand-US-Mozilla-Org\",\n    \"content\": \"test-addon@github.io\",\n    \"experiment\": \"ua-onboarding\",\n    \"variation\": \"chrome\",\n    \"ua\": \"firefox\"\n  }\n}\n```\n\n### Onboarding button clicks\n\n```js\n{\n  \"client_id\": \"26288a14-5cc4-d14f-ae0a-bb01ef45be9c\",\n  \"version\": \"76.0a1\",\n  \"locale\": \"en-US\",\n  \"experiments\": {},\n  \"release_channel\": \"default\",\n  \"addon_version\": \"20200330194034\",\n  \"message_id\": [\n    | \"DEFAULT_ABOUTWELCOME_AW_GET_STARTED\"\n    | \"DEFAULT_ABOUTWELCOME_AW_IMPORT_SETTINGS\"\n    | \"DEFAULT_ABOUTWELCOME_AW_CHOOSE_THEME\"\n    | \"RTAMO_DEFAULT_WELCOME\"\n  ],\n  \"event\": \"CLICK_BUTTION\",\n  \"browser_session_id\": \"e7e52665-7db3-f348-9918-e93160eb2ef3\",\n  \"event_context\": { \"page\": \"about:welcome\", \"source\": [\"primary_button\" | \"secondary_button\"] },\n  \"attribution\": {\n    \"source\": \"mozilla.org\",\n    \"medium\": \"referral\",\n    \"campaign\": \"Firefox-Brand-US-Mozilla-Org\",\n    \"content\": \"test-addon@github.io\",\n    \"experiment\": \"ua-onboarding\",\n    \"variation\": \"chrome\",\n    \"ua\": \"firefox\"\n  }\n}\n```\n\n### Onboarding Return-To-AMO install ping\n\n```js\n{\n  \"client_id\": \"26288a14-5cc4-d14f-ae0a-bb01ef45be9c\",\n  \"version\": \"76.0a1\",\n  \"locale\": \"en-US\",\n  \"experiments\": {},\n  \"release_channel\": \"default\",\n  \"addon_version\": \"20200330194034\",\n  \"message_id\": \"RTAMO_DEFAULT_WELCOME\",\n  \"event\": \"INSTALL\",\n  \"browser_session_id\": \"e7e52665-7db3-f348-9918-e93160eb2ef3\",\n  \"event_context\": { \"page\": \"about:welcome\", \"source\": \"ADD_EXTENSION_BUTTON\" },\n  \"attribution\": {\n    \"source\": \"mozilla.org\",\n    \"medium\": \"referral\",\n    \"campaign\": \"Firefox-Brand-US-Mozilla-Org\",\n    \"content\": \"test-addon@github.io\",\n    \"experiment\": \"ua-onboarding\",\n    \"variation\": \"chrome\",\n    \"ua\": \"firefox\"\n  }\n}\n```\n\n### Onboarding embedded migration interactions\n\n```js\n{\n  \"client_id\": \"26288a14-5cc4-d14f-ae0a-bb01ef45be9c\",\n  \"version\": \"76.0a1\",\n  \"locale\": \"en-US\",\n  \"experiments\": {},\n  \"release_channel\": \"default\",\n  \"addon_version\": \"20200330194034\",\n  \"message_id\": \"MR_WELCOME_DEFAULT_0_AW_IMPORT_SETTINGS_EMBEDDED\",\n  \"event\": \"CLICK_BUTTION\",\n  \"browser_session_id\": \"e7e52665-7db3-f348-9918-e93160eb2ef3\",\n  \"event_context\": {\n    \"page\": \"about:welcome\",\n    \"source\": [\"primary_button\" | \"migrate_close\"],\n  }\n}\n```\n\n### Onboarding session end ping\n\n```js\n{\n  \"client_id\": \"26288a14-5cc4-d14f-ae0a-bb01ef45be9c\",\n  \"version\": \"76.0a1\",\n  \"locale\": \"en-US\",\n  \"experiments\": {},\n  \"release_channel\": \"default\",\n  \"addon_version\": \"20200330194034\",\n  \"message_id\": \"DEFAULT_ABOUTWELCOME\",\n  \"event\": \"SESSION_END\",\n  \"browser_session_id\": \"e7e52665-7db3-f348-9918-e93160eb2ef3\",\n  \"event_context\": {\n    \"page\": \"about:welcome\",\n    \"reason\": [\n      | \"welcome-window-closed\"\n      | \"welcome-tab-closed\"\n      | \"app-shut-down\"\n      | \"address-bar-navigated\"\n    ]\n  },\n  \"attribution\": {\n    \"source\": \"mozilla.org\",\n    \"medium\": \"referral\",\n    \"campaign\": \"Firefox-Brand-US-Mozilla-Org\",\n    \"content\": \"test-addon@github.io\",\n    \"experiment\": \"ua-onboarding\",\n    \"variation\": \"chrome\",\n    \"ua\": \"firefox\"\n  }\n}\n```\n\n## Feature Callout pings\n\nImpressions and most interactions in Feature Callouts are handled by the\nOnboarding pings above, but since Feature Callouts are inserted into other\ncontent, they have some additional capabilities.\n\n### Page event ping for Feature Callouts\n\nFeature Callout messages can include properties to listen for specific events on\nthe host page and perform an action when fired. For example, Feature Callouts\npointing to a button can be dismissed when that button is clicked. This metric\nrecords the event type, event target, and action.\n\n```js\n{\n  \"experiments\": {},\n  \"locale\": \"en-US\",\n  \"version\": \"107.0a1\",\n  \"release_channel\": \"default\",\n  \"event\": \"PAGE_EVENT\",\n  \"event_context\": {\n    \"action\": \"DISMISS\",\n    \"reason\": \"CLICK\",\n    \"source\": \"button.primary#some-button\",\n    \"page\": \"about:firefoxview\"\n  },\n  \"message_id\": \"FIREFOX_VIEW_TAB_PICKUP_REMINDER\",\n  \"addon_version\": \"20221013100028\",\n  \"client_id\": \"26288a14-5cc4-d14f-ae0a-bb01ef45be9c\",\n  \"browser_session_id\": \"e7e52665-7db3-f348-9918-e93160eb2ef3\"\n}\n```\n\n### Feature Callout dismissal\n\nA Feature Callout can be dismissed by clicking its dismiss button directly or\npressing the Escape key. With a page event listener, it can also be configured\nto dismiss the callout when an event in the page happens, such as clicking the\ntarget of the callout (see the page event ping above).\n\n```js\n{\n  \"experiments\": {},\n  \"locale\": \"en-US\",\n  \"version\": \"108.0a1\",\n  \"release_channel\": \"default\",\n  \"event\": \"DISMISS\",\n  \"event_context\": {\n    \"source\": [\n      \"dismiss_button\",\n      \"KEY_Escape\",\n      \"PAGE_EVENT:button.primary#some-button\"\n    ],\n    \"page\": [\"about:firefoxview\", \"chrome://browser/content/browser.xhtml\"]\n  },\n  \"message_id\": \"some_feature_callout_id\",\n  \"addon_version\": \"20221013100028\",\n  \"client_id\": \"26288a14-5cc4-d14f-ae0a-bb01ef45be9c\",\n  \"browser_session_id\": \"e7e52665-7db3-f348-9918-e93160eb2ef3\"\n}\n```\n\n## Nimbus messaging experiment pings\n\nAll Firefox Messaging System experiments are deployed via Nimbus, including the\nfirst-run experience (about:welcome), Spotlights, Feature Callouts, and Moments\npages.\n\n### Enrollment & Unenrollment pings\n\nUnder the hood, Nimbus makes use of the Normandy API for experiment management.\nTherefore, the enrollment and unenrollment pings are collected through the\nNormandy counterparts. See the\n[`normandy`](https://searchfox.org/mozilla-central/source/toolkit/components/telemetry/Events.yaml#764)\ntelemetry event category for more details.\n\n### Experiment reach ping\n\nThis records whether a branch's targeting and trigger are satisfied for\nMessaging System experiments. The branch slug will be recorded in the\n`extra_keys` property, and the event `value` will be the experiment slug.\n\nWhen the specified trigger fires, targeting will be evaluated for each branch,\nand each qualified message _other than_ the active branch will be recorded in\nthis way.\n\nThis can be used to measure the reach of a trigger + targeting combination\nwithout actually showing a message\n([see here](https://experimenter.services.mozilla.com/nimbus/understanding-the-reach-of-our-triggers-fx112release-part-1/summary) for example).\nTo measure the reach of targeting without considering the reach of the trigger,\nuse the `messagesLoaded` trigger, which fires as soon as messages are loaded and\ntherefore has nearly 100% reach.\n\nUnlike other Messaging System pings, this is a legacy Firefox telemetry event,\nand it is sent only for users enrolled in a Messaging System experiment.\n\n```js\n{\n  \"category\": \"messaging_experiments\",\n  \"method\": \"reach\",\n  // message group: [\"cfr\", \"cfr-experiments\", \"eco\", \"import-spotlights\", \"micro-surveys\", \"moments-pages\"]\n  \"object\": \"cfr\"\n  \"value\": \"experiment_slug\",\n  \"extra_keys\": {\n    \"branches\": \"branch_slug\"\n  }\n}\n```\n\n### Experiment attribute errors\n\nThis records whether issues were encountered with any of the targeting\nattributes used in the experiment enrollment or message targeting. Two different\ntypes of events are sent: `attribute_error` and `attribute_timeout` along with\nthe attribute that caused it. An attribute is a variable inside the JEXL\ntargeting expression that is evaluated client side by the browser.\n\n```js\n{\n  \"messaging_experiments\",\n  \"targeting\",\n  \"attribute_error\", // event\n  \"foo\", // attribute,\n  \"extra_keys\": {\n    \"source\": \"message id or experiment slug\",\n  },\n},\n{\n  \"messaging_experiments\",\n  \"targeting\",\n  \"attribute_timeout\", // event\n  \"bar\", // attribute,\n  \"extra_keys\": {\n    \"source\": \"message id or experiment slug\",\n  },\n}\n```\n\n# New Tab Page pings\n\nThese pings are related to the New Tab Page. Although the New Tab Page is\ndistinct from the Messaging System, it shares some code and telemetry structure.\n\n## New Tab Page user event pings\n\nThese pings are captured when a user **performs some kind of interaction** in\nthe New Tab Page.\n\n### Basic shape\n\nA user event ping includes some basic metadata (tab id, addon version, etc.) as\nwell as variable fields which indicate the location and action of the event.\n\n```js\n{\n  // This indicates the type of interaction\n  \"event\": [\n    \"CLICK\",\n    \"SEARCH\",\n    \"BLOCK\",\n    \"DELETE\",\n    \"IMPRESSION\",\n    \"OPEN_NEW_WINDOW\",\n    \"OPEN_PRIVATE_WINDOW\",\n    \"BOOKMARK_DELETE\",\n    \"BOOKMARK_ADD\",\n    \"OPEN_NEWTAB_PREFS\",\n    \"CLOSE_NEWTAB_PREFS\",\n    \"SEARCH_HANDOFF\",\n    \"SHOW_PERSONALIZE\",\n    \"HIDE_PERSONALIZE\"\n  ],\n\n  // Optional field indicating the UI component type\n  \"source\": \"TOP_SITES\",\n\n  // Optional field if there is more than one of a component type on a page.\n  // It is zero-indexed.\n  // For example, clicking the second Highlight would result in an action_position of 1\n  \"action_position\": 1,\n\n  // Basic metadata\n  \"page\": [\"about:newtab\" | \"about:home\" | \"about:welcome\" | \"unknown\"],\n  \"client_id\": \"26288a14-5cc4-d14f-ae0a-bb01ef45be9c\",\n  \"session_id\": \"005deed0-e3e4-4c02-a041-17405fd703f6\",\n  \"browser_session_id\": \"e7e52665-7db3-f348-9918-e93160eb2ef3\",\n  \"addon_version\": \"20180710100040\",\n  \"locale\": \"en-US\",\n  \"action\": \"activity_stream_event\",\n  \"experiments\": {\n    \"experiment_1\": { \"branch\": \"control\" },\n    \"experiment_2\": { \"branch\": \"treatment\" }\n  },\n  \"user_prefs\": 7\n}\n```\n\n### Types of user interactions\n\n#### Show/hide Personalization Panel\n\n```js\n{\n  \"event\": [\"SHOW_PERSONALIZE\" | \"HIDE_PERSONALIZE\"], // Basic metadata\n  \"action\": \"activity_stream_event\",\n  \"page\": [\"about:newtab\" | \"about:home\" | \"about:welcome\" | \"unknown\"],\n  \"client_id\": \"26288a14-5cc4-d14f-ae0a-bb01ef45be9c\",\n  \"session_id\": \"005deed0-e3e4-4c02-a041-17405fd703f6\",\n  \"browser_session_id\": \"e7e52665-7db3-f348-9918-e93160eb2ef3\",\n  \"addon_version\": \"20180710100040\",\n  \"locale\": \"en-US\",\n  \"user_prefs\": 7\n}\n```\n\n#### Performing a search\n\n```js\n{\n  \"event\": \"SEARCH\",\n\n  // Basic metadata\n  \"action\": \"activity_stream_event\",\n  \"page\": [\"about:newtab\" | \"about:home\" | \"about:welcome\" | \"unknown\"],\n  \"client_id\": \"26288a14-5cc4-d14f-ae0a-bb01ef45be9c\",\n  \"session_id\": \"005deed0-e3e4-4c02-a041-17405fd703f6\",\n  \"browser_session_id\": \"e7e52665-7db3-f348-9918-e93160eb2ef3\",\n  \"addon_version\": \"20180710100040\",\n  \"locale\": \"en-US\",\n  \"user_prefs\": 7\n}\n```\n\n#### Performing a search handoff\n\n```js\n{\n  \"event\": \"SEARCH_HANDOFF\",\n\n  // Basic metadata\n  \"action\": \"activity_stream_event\",\n  \"page\": [\"about:newtab\" | \"about:home\" | \"about:welcome\" | \"unknown\"],\n  \"client_id\": \"26288a14-5cc4-d14f-ae0a-bb01ef45be9c\",\n  \"session_id\": \"005deed0-e3e4-4c02-a041-17405fd703f6\",\n  \"browser_session_id\": \"e7e52665-7db3-f348-9918-e93160eb2ef3\",\n  \"addon_version\": \"20180710100040\",\n  \"locale\": \"en-US\",\n  \"user_prefs\": 7\n}\n```\n\n#### Clicking a top site item\n\n```js\n{\n  \"event\": \"CLICK\",\n  \"source\": \"TOP_SITES\",\n  \"action_position\": 2,\n  \"value\": {\n    \"card_type\": [\"pinned\" | \"search\" | \"spoc\"],\n    \"icon_type\": [\"screenshot_with_icon\" | \"screenshot\" | \"tippytop\" | \"rich_icon\" | \"no_image\" | \"custom_screenshot\"],\n    // only exists if its card_type = \"search\"\n    \"search_vendor\": \"google\"\n  }\n\n  // Basic metadata\n  \"action\": \"activity_stream_event\",\n  \"page\": [\"about:newtab\" | \"about:home\" | \"about:welcome\" | \"unknown\"],\n  \"client_id\": \"26288a14-5cc4-d14f-ae0a-bb01ef45be9c\",\n  \"session_id\": \"005deed0-e3e4-4c02-a041-17405fd703f6\",\n  \"browser_session_id\": \"e7e52665-7db3-f348-9918-e93160eb2ef3\",\n  \"addon_version\": \"20180710100040\",\n  \"locale\": \"en-US\",\n  \"user_prefs\": 7\n}\n```\n\n#### Clicking a top story item\n\n```js\n{\n  \"event\": \"CLICK\",\n  \"source\": [\"CARDGRID\" | \"CARDGRID_WIDGET\"],\n  \"action_position\": 2,\n  \"value\": {\n    // \"spoc\" for sponsored stories, \"organic\" for regular stories.\n    \"card_type\": [\"organic\" | \"spoc\" | \"topics_widget\"],\n    // topic and position only exists if its card_type = \"topics_widget\"\n    \"topic\": \"entertainment\"\n    // The index position of the topic link within the card\n    \"position_in_card\": 0\n  }\n\n  // Basic metadata\n  \"action\": \"activity_stream_event\",\n  \"page\": [\"about:newtab\" | \"about:home\" | \"about:welcome\" | \"unknown\"],\n  \"client_id\": \"26288a14-5cc4-d14f-ae0a-bb01ef45be9c\",\n  \"session_id\": \"005deed0-e3e4-4c02-a041-17405fd703f6\",\n  \"browser_session_id\": \"e7e52665-7db3-f348-9918-e93160eb2ef3\",\n  \"addon_version\": \"20180710100040\",\n  \"locale\": \"en-US\",\n  \"user_prefs\": 7\n}\n```\n\n#### Clicking a popular topic link\n\n```js\n{\n  \"event\": \"CLICK\",\n  \"source\": \"POPULAR_TOPICS\",\n  \"value\": {\n    \"topic\": [\"must-reads\" | \"productivity\" | \"health\" | \"finance\" | \"technology\" | \"more-recommendations\"]\n  }\n  // Basic metadata\n  \"action\": \"activity_stream_event\",\n  \"page\": [\"about:newtab\" | \"about:home\" | \"about:welcome\" | \"unknown\"],\n  \"client_id\": \"26288a14-5cc4-d14f-ae0a-bb01ef45be9c\",\n  \"session_id\": \"005deed0-e3e4-4c02-a041-17405fd703f6\",\n  \"browser_session_id\": \"e7e52665-7db3-f348-9918-e93160eb2ef3\",\n  \"addon_version\": \"20180710100040\",\n  \"locale\": \"en-US\",\n  \"user_prefs\": 7\n}\n```\n\n#### Adding a search shortcut\n\n```js\n{\n  \"event\": \"SEARCH_EDIT_ADD\",\n  \"source\": \"TOP_SITES\",\n  \"action_position\": 2,\n  \"value\": {\n    \"search_vendor\": \"google\"\n  }\n\n  // Basic metadata\n  \"action\": \"activity_stream_event\",\n  \"page\": [\"about:newtab\" | \"about:home\" | \"about:welcome\" | \"unknown\"],\n  \"client_id\": \"26288a14-5cc4-d14f-ae0a-bb01ef45be9c\",\n  \"session_id\": \"005deed0-e3e4-4c02-a041-17405fd703f6\",\n  \"browser_session_id\": \"e7e52665-7db3-f348-9918-e93160eb2ef3\",\n  \"addon_version\": \"20180710100040\",\n  \"locale\": \"en-US\",\n  \"user_prefs\": 7\n}\n```\n\n#### Showing privacy information\n\n```js\n{\n  \"event\": \"SHOW_PRIVACY_INFO\",\n  \"source\": \"TOP_SITES\",\n  \"action_position\": 2,\n\n  // Basic metadata\n  \"action\": \"activity_stream_event\",\n  \"page\": [\"about:newtab\" | \"about:home\" | \"about:welcome\" | \"unknown\"],\n  \"client_id\": \"26288a14-5cc4-d14f-ae0a-bb01ef45be9c\",\n  \"session_id\": \"005deed0-e3e4-4c02-a041-17405fd703f6\",\n  \"browser_session_id\": \"e7e52665-7db3-f348-9918-e93160eb2ef3\",\n  \"addon_version\": \"20180710100040\",\n  \"locale\": \"en-US\",\n  \"user_prefs\": 7\n}\n```\n\n#### Clicking on privacy information link\n\n```js\n{\n  \"event\": \"CLICK_PRIVACY_INFO\",\n  \"source\": \"DS_PRIVACY_MODAL\",\n\n  // Basic metadata\n  \"action\": \"activity_stream_event\",\n  \"page\": [\"about:newtab\" | \"about:home\" | \"about:welcome\" | \"unknown\"],\n  \"client_id\": \"26288a14-5cc4-d14f-ae0a-bb01ef45be9c\",\n  \"session_id\": \"005deed0-e3e4-4c02-a041-17405fd703f6\",\n  \"browser_session_id\": \"e7e52665-7db3-f348-9918-e93160eb2ef3\",\n  \"addon_version\": \"20180710100040\",\n  \"locale\": \"en-US\",\n  \"user_prefs\": 7\n}\n```\n\n#### Deleting a search shortcut\n\n```js\n{\n  \"event\": \"SEARCH_EDIT_DELETE\",\n  \"source\": \"TOP_SITES\",\n  \"action_position\": 2,\n  \"value\": {\n    \"search_vendor\": \"google\"\n  }\n\n  // Basic metadata\n  \"action\": \"activity_stream_event\",\n  \"page\": [\"about:newtab\" | \"about:home\" | \"about:welcome\" | \"unknown\"],\n  \"client_id\": \"26288a14-5cc4-d14f-ae0a-bb01ef45be9c\",\n  \"session_id\": \"005deed0-e3e4-4c02-a041-17405fd703f6\",\n  \"browser_session_id\": \"e7e52665-7db3-f348-9918-e93160eb2ef3\",\n  \"addon_version\": \"20180710100040\",\n  \"locale\": \"en-US\",\n  \"user_prefs\": 7\n}\n```\n\n#### Deleting an item from history\n\n```js\n{\n  \"event\": \"DELETE\",\n  \"source\": \"TOP_SITES\",\n  \"action_position\": 2,\n  \"value\": {\n    \"card_type\": \"pinned\",\n    \"icon_type\": [\"screenshot_with_icon\" | \"screenshot\" | \"tippytop\" | \"rich_icon\" | \"no_image\" | \"custom_screenshot\"]\n  }\n\n  // Basic metadata\n  \"action\": \"activity_stream_event\",\n  \"page\": [\"about:newtab\" | \"about:home\" | \"about:welcome\" | \"unknown\"],\n  \"client_id\": \"26288a14-5cc4-d14f-ae0a-bb01ef45be9c\",\n  \"session_id\": \"005deed0-e3e4-4c02-a041-17405fd703f6\",\n  \"browser_session_id\": \"e7e52665-7db3-f348-9918-e93160eb2ef3\",\n  \"addon_version\": \"20180710100040\",\n  \"locale\": \"en-US\",\n  \"user_prefs\": 7\n}\n```\n\n#### Blocking a site\n\n```js\n{\n  \"event\": \"BLOCK\",\n  \"source\": \"TOP_SITES\",\n  \"action_position\": 2,\n  \"value\": {\n    \"card_type\": [\"pinned\" | \"search\" | \"spoc\"],\n    \"icon_type\": [\"screenshot_with_icon\" | \"screenshot\" | \"tippytop\" | \"rich_icon\" | \"no_image\" | \"custom_screenshot\"],\n    // only exists if its card_type = \"search\"\n    \"search_vendor\": \"google\"\n  }\n\n  // Basic metadata\n  \"action\": \"activity_stream_event\",\n  \"page\": [\"about:newtab\" | \"about:home\" | \"about:welcome\" | \"unknown\"],\n  \"client_id\": \"26288a14-5cc4-d14f-ae0a-bb01ef45be9c\",\n  \"session_id\": \"005deed0-e3e4-4c02-a041-17405fd703f6\",\n  \"browser_session_id\": \"e7e52665-7db3-f348-9918-e93160eb2ef3\",\n  \"addon_version\": \"20180710100040\",\n  \"locale\": \"en-US\",\n  \"user_prefs\": 7\n}\n```\n\n#### Bookmarking a link\n\n```js\n{\n  \"event\": \"BOOKMARK_ADD\",\n  \"source\": \"HIGHLIGHTS\",\n  \"action_position\": 2,\n  \"value\": {\n    \"card_type\": \"trending\"\n  }\n\n  // Basic metadata\n  \"action\": \"activity_stream_event\",\n  \"page\": [\"about:newtab\" | \"about:home\" | \"about:welcome\"],\n  \"client_id\": \"26288a14-5cc4-d14f-ae0a-bb01ef45be9c\",\n  \"session_id\": \"005deed0-e3e4-4c02-a041-17405fd703f6\",\n  \"browser_session_id\": \"e7e52665-7db3-f348-9918-e93160eb2ef3\",\n  \"addon_version\": \"20180710100040\",\n  \"locale\": \"en-US\",\n  \"user_prefs\": 7\n}\n```\n\n#### Removing a bookmark from a link\n\n```js\n{\n  \"event\": \"BOOKMARK_DELETE\",\n  \"source\": \"HIGHLIGHTS\",\n  \"action_position\": 2,\n  \"value\": {\n    \"card_type\": \"bookmark\"\n  }\n\n  // Basic metadata\n  \"action\": \"activity_stream_event\",\n  \"page\": [\"about:newtab\" | \"about:home\" | \"about:welcome\" | \"unknown\"],\n  \"client_id\": \"26288a14-5cc4-d14f-ae0a-bb01ef45be9c\",\n  \"session_id\": \"005deed0-e3e4-4c02-a041-17405fd703f6\",\n  \"browser_session_id\": \"e7e52665-7db3-f348-9918-e93160eb2ef3\",\n  \"addon_version\": \"20180710100040\",\n  \"locale\": \"en-US\",\n  \"user_prefs\": 7\n}\n```\n\n#### Opening a link in a new window\n\n```js\n{\n  \"event\": \"OPEN_NEW_WINDOW\",\n  \"source\": \"TOP_SITES\",\n  \"action_position\": 2,\n  \"value\": {\n    \"card_type\": \"pinned\",\n    \"icon_type\": [\"screenshot_with_icon\" | \"screenshot\" | \"tippytop\" | \"rich_icon\" | \"no_image\" | \"custom_screenshot\"]\n  }\n\n  // Basic metadata\n  \"action\": \"activity_stream_event\",\n  \"page\": [\"about:newtab\" | \"about:home\" | \"about:welcome\" | \"unknown\"],\n  \"client_id\": \"26288a14-5cc4-d14f-ae0a-bb01ef45be9c\",\n  \"session_id\": \"005deed0-e3e4-4c02-a041-17405fd703f6\",\n  \"browser_session_id\": \"e7e52665-7db3-f348-9918-e93160eb2ef3\",\n  \"addon_version\": \"20180710100040\",\n  \"locale\": \"en-US\",\n  \"user_prefs\": 7\n}\n```\n\n#### Opening a link in a new private window\n\n```js\n{\n  \"event\": \"OPEN_PRIVATE_WINDOW\",\n  \"source\": \"TOP_SITES\",\n  \"action_position\": 2,\n  \"value\": {\n    \"card_type\": \"pinned\",\n    \"icon_type\": [\"screenshot_with_icon\" | \"screenshot\" | \"tippytop\" | \"rich_icon\" | \"no_image\" | \"custom_screenshot\"]\n  }\n\n  // Basic metadata\n  \"action\": \"activity_stream_event\",\n  \"page\": [\"about:newtab\" | \"about:home\" | \"about:welcome\" | \"unknown\"],\n  \"client_id\": \"26288a14-5cc4-d14f-ae0a-bb01ef45be9c\",\n  \"session_id\": \"005deed0-e3e4-4c02-a041-17405fd703f6\",\n  \"browser_session_id\": \"e7e52665-7db3-f348-9918-e93160eb2ef3\",\n  \"addon_version\": \"20180710100040\",\n  \"locale\": \"en-US\",\n  \"user_prefs\": 7\n}\n```\n\n#### Opening the new tab preferences pane\n\n```js\n{\n  \"event\": \"OPEN_NEWTAB_PREFS\",\n\n  // Basic metadata\n  \"action\": \"activity_stream_event\",\n  \"page\": [\"about:newtab\" | \"about:home\" | \"about:welcome\" | \"unknown\"],\n  \"client_id\": \"26288a14-5cc4-d14f-ae0a-bb01ef45be9c\",\n  \"session_id\": \"005deed0-e3e4-4c02-a041-17405fd703f6\",\n  \"browser_session_id\": \"e7e52665-7db3-f348-9918-e93160eb2ef3\",\n  \"addon_version\": \"20180710100040\",\n  \"locale\": \"en-US\",\n  \"user_prefs\": 7\n}\n```\n\n#### Closing the new tab preferences pane\n\n```js\n{\n  \"event\": \"CLOSE_NEWTAB_PREFS\",\n\n  // Basic metadata\n  \"action\": \"activity_stream_event\",\n  \"page\": [\"about:newtab\" | \"about:home\" | \"about:welcome\" | \"unknown\"],\n  \"client_id\": \"26288a14-5cc4-d14f-ae0a-bb01ef45be9c\",\n  \"session_id\": \"005deed0-e3e4-4c02-a041-17405fd703f6\",\n  \"browser_session_id\": \"e7e52665-7db3-f348-9918-e93160eb2ef3\",\n  \"addon_version\": \"20180710100040\",\n  \"locale\": \"en-US\",\n  \"user_prefs\": 7\n}\n```\n\n#### Changing preferences from about:preferences#home or on the customize menu on the newtab page.\n\n```js\n{\n  \"event\": \"PREF_CHANGED\",\n  \"source\": [\"TOP_STORIES\" | \"POCKET_SPOCS\" | \"HIGHLIGHTS\" | \"TOP_SITES\" | \"SPONSORED_TOP_SITES\"],\n  \"value\": \"{\\\"status\\\":true|false,\\\"menu_source\\\":\\\"ABOUT_PREFERENCES|CUSTOMIZE_MENU\\\"}\"\n  \"release_channel\": \"default\",\n  \"experiments\": {},\n  \"client_id\": \"26288a14-5cc4-d14f-ae0a-bb01ef45be9c\",\n  \"browser_session_id\": \"e7e52665-7db3-f348-9918-e93160eb2ef3\",\n  \"addon_version\": \"20180710100040\",\n  \"locale\": \"en-US\",\n  \"user_prefs\": 7\n}\n```\n\n#### Pinning a tab\n\n```js\n{\n  \"event\": \"TABPINNED\",\n  \"source\": \"TAB_CONTEXT_MENU\",\n  \"value\": \"{\\\"total_pinned_tabs\\\":2}\",\n\n  // Basic metadata\n  \"action\": \"activity_stream_user_event\",\n  \"client_id\": \"aabaace5-35f4-7345-a28e-5502147dc93c\",\n  \"version\": \"67.0a1\",\n  \"addon_version\": \"20190218094427\",\n  \"locale\": \"en-US\",\n  \"user_prefs\": 59,\n  \"page\": \"n/a\",\n  \"session_id\": \"n/a\",\n  \"browser_session_id\": \"e7e52665-7db3-f348-9918-e93160eb2ef3\"\n}\n```\n\n#### Adding or editing a new TopSite\n\n```js\n{\n  \"event\": \"TOP_SITES_EDIT\",\n  \"source\": \"TOP_SITES_SOURCE\",\n  \"browser_session_id\": \"e7e52665-7db3-f348-9918-e93160eb2ef3\",\n  // \"-1\" Is used for prepending a new TopSite at the front of the list, while\n  // any other possible value is used for editing an existing TopSite slot.\n  \"action_position\": [-1 | \"0..TOP_SITES_LENGTH\"]\n}\n```\n\n#### Requesting a custom screenshot preview\n\n```js\n{\n  \"event\": \"PREVIEW_REQUEST\",\n  \"browser_session_id\": \"e7e52665-7db3-f348-9918-e93160eb2ef3\",\n  \"source\": \"TOP_SITES\"\n}\n```\n\n## New Tab Page session end pings\n\nWhen a session ends, the browser will send a `\"activity_stream_session\"` ping to our metrics servers. This ping contains the length of the session, a unique reason for why the session ended, and some additional metadata.\n\n### Basic event\n\nAll `\"activity_stream_session\"` pings have the following basic shape. Some fields are variable.\n\n```js\n{\n  \"action\": \"activity_stream_session\",\n  \"client_id\": \"26288a14-5cc4-d14f-ae0a-bb01ef45be9c\",\n  \"session_id\": \"005deed0-e3e4-4c02-a041-17405fd703f6\",\n  \"addon_version\": \"20180710100040\",\n  \"locale\": \"en-US\",\n  \"page\": [\"about:newtab\" | \"about:home\" | \"about:welcome\" | \"unknown\"],\n  \"session_duration\": 4199,\n  \"profile_creation_date\": 14786,\n  \"experiments\": {\n    \"experiment_1\": { \"branch\": \"control\" },\n    \"experiment_2\": { \"branch\": \"treatment\" }\n  },\n  \"user_prefs\": 7\n}\n```\n\n### What causes a session end?\n\nHere are different scenarios that cause a session end event to be sent:\n\n1. After a search\n2. Clicking on something that causes navigation (top site, highlight, etc.)\n3. Closing the browser\n4. Refreshing\n5. Navigating to a new URL via the url bar or file menu\n\n### Session performance data\n\nThis data is held in a child object of the `activity_stream_session` event called `perf`. All fields suffixed by `_ts` are type `DOMHighResTimeStamp` (aka a double of milliseconds, with a 5 microsecond precision) with 0 being the [timeOrigin](https://developer.mozilla.org/en-US/docs/Web/API/DOMHighResTimeStamp#The_time_origin) of the browser's hidden chrome window.\n\nAn example might look like this:\n\n```js\nperf: {\n  // Timestamp of the action perceived by the user to trigger the load\n  // of this page.\n  //\n  // Not required at least for error cases where the\n  // observer event doesn't fire\n  \"load_trigger_ts\": 1,\n\n  // What was the perceived trigger of the load action:\n  \"load_trigger_type\": [\n    \"first_window_opened\" | // home only\n    \"menu_plus_or_keyboard\" | // newtab only\n    \"unexpected\" // sessions lacking actual start times\n  ],\n\n  // when the page itself receives an event that document.visibilityStat=visible\n  \"visibility_event_rcvd_ts\": 2,\n\n  // When did the topsites element finish painting?  Note that, at least for\n  // the first tab to be loaded, and maybe some others, this will be before\n  // topsites has yet to receive screenshots updates from the add-on code,\n  // and is therefore just showing placeholder screenshots.\n  \"topsites_first_painted_ts\": 5,\n\n  // The 6 different types of TopSites icons and how many of each kind did the\n  // user see.\n  \"topsites_icon_stats\": {\n    \"custom_screenshot\": 0,\n    \"screenshot_with_icon\": 2,\n    \"screenshot\": 1,\n    \"tippytop\": 2,\n    \"rich_icon\": 1,\n    \"no_image\": 0\n  },\n\n  // The number of Top Sites that are pinned.\n  \"topsites_pinned\": 3,\n\n  // The number of search shortcut Top Sites.\n  \"topsites_search_shortcuts\": 2,\n\n  // How much longer the data took, in milliseconds, to be ready for display\n  // than it would have been in the ideal case. The user currently sees placeholder\n  // cards instead of real cards for approximately this length of time. This is\n  // sent when the first call of the component's `render()` method happens with\n  // `this.props.initialized` set to `false`, and the value is the amount of\n  // time in ms until `render()` is called with `this.props.initialized` set to `true`.\n  \"highlights_data_late_by_ms\": 67,\n  \"topsites_data_late_by_ms\": 35,\n\n  // Whether the page is preloaded or not.\n  \"is_preloaded\": [true|false],\n}\n```\n\n## New Tab Page Top Story pings\n\nWhen Top Story (currently powered by Pocket) is enabled in Activity Stream, the browser will send following `activity_stream_impression_stats` to our metrics servers.\n\n### Impression stats\n\nThis records all the Pocket recommended articles (a list of `id`s) when the user opens a newtab.\n\n```js\n{\n  \"impression_id\": \"{005deed0-e3e4-4c02-a041-17405fd703f6}\",\n  \"addon_version\": \"20180710100040\",\n  \"locale\": \"en-US\",\n  \"source\": \"pocket\",\n  \"page\": [\"about:newtab\" | \"about:home\" | \"about:welcome\" | \"unknown\"],\n  \"user_prefs\": 7,\n  \"window_inner_width\": 1000,\n  \"window_inner_height\" 900,\n  \"experiments\": {\n    \"experiment_1\": {\"branch\": \"control\"},\n    \"experiment_2\": {\"branch\": \"treatment\"}\n  },\n  \"tiles\": [{\"id\": 10000}, {\"id\": 10001}, {\"id\": 10002}]\n}\n```\n\n### Click/block/save_to_pocket ping\n\nThis records the user's interaction with those Pocket tiles.\n\n```js\n{\n  \"impression_id\": \"{005deed0-e3e4-4c02-a041-17405fd703f6}\",\n  \"addon_version\": \"20180710100040\",\n  \"locale\": \"en-US\",\n  \"source\": \"pocket\",\n  \"page\": [\"about:newtab\" | \"about:home\" | \"about:welcome\" | \"unknown\"],\n  \"experiments\": {\n    \"experiment_1\": {\"branch\": \"control\"},\n    \"experiment_2\": {\"branch\": \"treatment\"}\n  },\n  \"user_prefs\": 7,\n  \"window_inner_width\": 1000,\n  \"window_inner_height\" 900,\n\n  // \"pos\" is the 0-based index to record the tile's position in the Pocket section.\n  // \"shim\" is a base64 encoded shim attached to spocs, unique to the impression from the Ad server.\n  \"tiles\": [{\"id\": 10000, \"pos\": 0, \"shim\": \"enuYa1j73z3RzxgTexHNxYPC/b,9JT6w5KB0CRKYEU+\"}],\n\n  // A 0-based index to record which tile in the \"tiles\" list that the user just interacted with.\n  \"click|block|pocket\": 0\n}\n```\n\n## Save to Pocket button pings\n\nRight now the save to Pocket button, while technically outside of newtab, has some similarities with the newtab telemetry.\n\nThese pings record user interaction with the save to Pocket button.\n\n### Click/impression ping\n\n```js\n{\n  \"locale\": \"en-US\",\n  \"version\": \"83.0a1\",\n  \"release_channel\": \"default\",\n  \"model\": \"\",\n  \"events\": [\n    {\n      \"action\": \"click|impression|unpin\",\n      \"position\": 0,\n      \"source\": [\"recs_learn_more\" | \"view_list\" | \"home_view_list\" | \"home_topic\" | \"home_discover\" | \"save_button\" | \"home_button\" | \"on_save_recs\" | \"learn_more\" | \"sign_up_1\" | \"sign_up_2\" | \"log_in\"]\n    }\n  ],\n  \"pocket_logged_in_state\": true | false,\n  \"impression_id\": \"{005deed0-e3e4-4c02-a041-17405fd703f6}\",\n  \"profile_creation_date\": 18550\n}\n```"}}}, "firefox_desktop_background_update": {"app": {"logo": "https://raw.githubusercontent.com/mozilla/protocol-assets/main/logos/firefox/browser/logo.svg", "commentary": "As of this writing, the [Firefox Background Updater](https://firefox-source-docs.mozilla.org/toolkit/mozapps/update/docs/BackgroundUpdates.html) is Windows-only.\nThe data it sends is operational and is not designed to answer questions about user behaviour.\n\nFirefox itself also sends an \"update\" ping when an update is available and after one has been applied (on all platforms).\nThis is probably what you'll want to use for most analysis use cases. \nFor more information, see the [\"update\" ping](https://firefox-source-docs.mozilla.org/toolkit/components/telemetry/data/update-ping.html) in the Firefox Source Documentation."}}, "firefox_echo_show": {"app": {"logo": "https://raw.githubusercontent.com/mozilla/protocol-assets/main/logos/firefox/browser/logo.svg", "tags": ["Amazon"]}}, "firefox_fire_tv": {"app": {"logo": "https://github.com/mozilla/glean-dictionary/raw/05a8267337b175f1200fc0c6f5e52e87bed05138/public/img/app-logos/amazon.png", "tags": ["Amazon"]}}, "firefox_ios": {"app": {"featured": true, "logo": "https://raw.githubusercontent.com/mozilla/protocol-assets/main/logos/firefox/browser/logo.svg", "tags": ["iOS"]}, "metrics": {"app.opened_as_default_browser": {"commentary": "See [STMO#77816](https://sql.telemetry.mozilla.org/queries/77816/#193601)\ud83d\udd12 for an example of a query that uses this probe to estimate the number of new Firefox for iOS profiles that are opened as default over time. The query uses the baseline ping to calculate the number of daily new profiles, and left joins onto a count of profiles that have a non-0 (true) value for `app.opened_as_default_browser`.\n\nNote again that this probe will NOT reflect users who DO have Firefox for iOS set as default but only open the app directly on a given day (that is, do not open it via an external link). This means that the numbers reflected in the query above should be treated as a lower bound (i.e. an undercount) on the number of new profiles setting the browser to default on a given day."}, "search.in_content": {"commentary": "Around Feb 2021, telemetry was implemented for Google topsite tile on iOS. \n\nThis implementation leads to the increase in both the `tagged_sap` and `tagged_follow_on` and drop in `organic` in the `mobile_search_clients_daily` (hence all tables based on it). \n\nDashboard will be added later since currently work to show this implementatio in `bigquery-etl` is still in progress."}, "tabs.open": {"commentary": "This is best used as an indication of how often a client opens new a new tab and not how many tabs that are open.\nThis is due to the fact that this metric only counts the number of tabs _opened_ by the user during the current \nmetrics ping time window, it doesn't account for any tabs that may have already been open prior to the beginning \nof the metrics ping window."}, "top_site.contile_click": {"commentary": "Note: this metric has been refactored see https://mozilla-hub.atlassian.net/browse/FXIOS-4367.\n\nAs a result, **the correct event_category is top_sites** (plural). A small number of clients on old versions may still be sending telemetry through the outdated top_site event."}, "top_site.contile_impression": {"commentary": "Note: this metric has been refactored see https://mozilla-hub.atlassian.net/browse/FXIOS-4367.\n\nAs a result, **the correct event_category is top_sites** (plural). A small number of clients on old versions may still be sending telemetry through the outdated top_site event."}}}, "firefox_reality": {"app": {"logo": "https://raw.githubusercontent.com/mozilla/glean-dictionary/05a8267337b175f1200fc0c6f5e52e87bed05138/public/img/app-logos/reality.png"}}, "firefox_reality_pc": {"app": {"logo": "https://raw.githubusercontent.com/mozilla/glean-dictionary/05a8267337b175f1200fc0c6f5e52e87bed05138/public/img/app-logos/reality.png"}}, "focus_android": {"app": {"featured": true, "logo": "https://raw.githubusercontent.com/mozilla/protocol-assets/main/logos/firefox/browser/focus/logo.svg", "tags": ["Android"]}}, "focus_ios": {"app": {"featured": true, "logo": "https://raw.githubusercontent.com/mozilla/protocol-assets/main/logos/firefox/browser/focus/logo.svg", "tags": ["iOS"]}}, "gecko": {"metrics": {"perf.page_load": {"commentary": "**Mar 17, 2023 - May 9, 2023** - Firefox for Android was collecting but not sending `perf.page_load` events during this period. The recorded events started being sent after May 9, 2023 resulting in a spike of events that eventually returned to normal levels. [bug1833178]\n\nPrior to this, `page_load` events were seen in the `pageload` ping in v110, but this was due to a bug. \n\nFull support of custom pings sent from Gecko in Firefox for Android landed in v113 and hit release on May 9th, coinciding with a spike of events that had previously been collected by not yet sent. \n\nSee the linked [bug1833178] for more information.\n\n[bug1833178]: https://bugzilla.mozilla.org/show_bug.cgi?id=1833178"}}}, "glean-core": {"metrics": {"app_channel": {"commentary": "Can't be used by most mobile products to signify the channel since app stores require separate application ids per channel.\n\nOn Firefox Desktop versions 89 and earlier this represents the channel the binary was built on,\nnot the channel the profile asks for updates on.\nThis means that\n[Release Candidate (RC)](https://firefox-source-docs.mozilla.org/contributing/pocket-guide-shipping-firefox.html#rc)\nbuilds served to beta-channel profiles will temporarily make it look as though there are few beta clients and somewhat more release clients.\nThis will appear in channel-based analyses as a seasonal population shift with a period of the release cadence\n([usually four weeks](https://wiki.mozilla.org/RapidRelease/Calendar)).\n\nOn Firefox Desktop versions 90 and later this represents the channel the profile asks for updates on.\nThis means that RC builds served to beta-channel profiles will still report\n\"beta\" even though they were built with the release build configuration.\nFor more details, see [bug 1710664](https://bugzilla.mozilla.org/show_bug.cgi?id=1710664)."}, "end_time": {"commentary": "This ends up being a string in the data and is not easily parsed into a `DATE` or `TIMESTAMP`, thus there is a \npre-parsed version that is much easier to use `ping_info.parsed_end_time` when writing queries."}, "first_run_date": {"commentary": "This field is stored as a string in the \"raw\" tables (e.g., `baseline`, `metrics`) and a familiar `DATE` in derived tables (e.g., `baseline_clients_daily`).\n\nAn example of calculating DAU by profile age from the `baseline` table is given in [STMO#79741](https://sql.telemetry.mozilla.org/queries/79741/source,)\ud83d\udd12 which\nutilizes the UDF `parse_iso8601_date` to create a `DATE` from the string column.\n\nAn example of calculating new profile DAU from the `baseline_clients_daily` table is given in [STMO#77855](https://sql.telemetry.mozilla.org/queries/77855/source)\ud83d\udd12."}, "glean.error.preinit_tasks_overflow": {"commentary": "In Version 0 this figure includes the number of tasks that didn't overflow the queue.\nThat is to say, for a preinit dispatcher queue with a max size of 100,\nthis metric will either be absent or be reported with a value > 100.\n\nIn Version 1 (current) this figure counts only the tasks that overflowed the pre-initialization queue."}, "locale": {"commentary": "Application Locale has been added to Glean (in the [`client_info.locale` metric](https://dictionary.telemetry.mozilla.org/apps/firefox_desktop/metrics/locale)) as of Firefox v118. See [Bug 1626969](https://bugzilla.mozilla.org/show_bug.cgi?id=1626969) for more information."}, "start_time": {"commentary": "This ends up being a string in the data and is not easily parsed into a `DATE` or `TIMESTAMP`, thus there is a \npre-parsed version that is much easier to use `ping_info.parsed_start_time` when writing queries."}}, "pings": {"baseline": {"commentary": "The schedule for the baseline ping on Firefox Desktop differs from mobile applications.\nDocumentation on that schedule is available here: https://firefox-source-docs.mozilla.org/toolkit/components/glean/dev/builtin_pings.html"}}}, "glean_dictionary": {"app": {"logo": "https://raw.githubusercontent.com/mozilla/glean-dictionary/05a8267337b175f1200fc0c6f5e52e87bed05138/public/favicon.png"}}, "klar_android": {"app": {"featured": true, "logo": "https://raw.githubusercontent.com/mozilla/protocol-assets/main/logos/firefox/browser/focus/logo.svg", "tags": ["Android"], "commentary": "Data collection from Klar is disabled by default. See [here](https://github.com/mozilla-mobile/firefox-android/blob/9c9e13d6c9fed6d759759d7f6279e5baf911c4fa/focus-android/app/src/main/java/org/mozilla/focus/telemetry/TelemetryWrapper.kt#L63-L64)."}}, "klar_ios": {"app": {"featured": true, "logo": "https://raw.githubusercontent.com/mozilla/protocol-assets/main/logos/firefox/browser/focus/logo.svg", "tags": ["iOS"], "commentary": "Data collection from Klar is disabled by default. See [here](https://github.com/mozilla-mobile/focus-ios/blob/c8a0dcca590bf3b3e2247ea86d05a979b8545967/Shared/Settings.swift#L61)."}}, "lockwise_android": {"app": {"logo": "https://raw.githubusercontent.com/mozilla/protocol-assets/main/logos/firefox/lockwise/logo.svg", "tags": ["Android"]}}, "lockwise_ios": {"app": {"logo": "https://raw.githubusercontent.com/mozilla/protocol-assets/main/logos/firefox/lockwise/logo.svg", "tags": ["iOS"]}}, "logins-store": {"metrics": {"logins_store.read_query_count": {"commentary": "Read and write success rates for the logins store can be found in [STMO#fenix-logins-and-places-performance-metrics](https://sql.telemetry.mozilla.org/dashboard/fenix-logins-and-places-performance-metrics?p_org_mozilla_fenix=org_mozilla_firefox)\ud83d\udd12.\n\n[STMO#70696](https://sql.telemetry.mozilla.org/queries/70696?p_org_mozilla_fenix=org_mozilla_firefox#177923)\ud83d\udd12 is the main query that calculates the read success rates for the logins store."}, "logins_store.read_query_error_count": {"commentary": "Read and write success rates for the logins store can be found in [STMO#fenix-logins-and-places-performance-metrics](https://sql.telemetry.mozilla.org/dashboard/fenix-logins-and-places-performance-metrics?p_org_mozilla_fenix=org_mozilla_firefox)\ud83d\udd12.\n\n[STMO#70696](https://sql.telemetry.mozilla.org/queries/70696?p_org_mozilla_fenix=org_mozilla_firefox#177923)\ud83d\udd12 is the main query that calculates the read error rates for the logins store."}, "logins_store.write_query_count": {"commentary": "Read and write success rates for the logins store can be found in [STMO#fenix-logins-and-places-performance-metrics](https://sql.telemetry.mozilla.org/dashboard/fenix-logins-and-places-performance-metrics?p_org_mozilla_fenix=org_mozilla_firefox)\ud83d\udd12.\n\n[STMO#70696](https://sql.telemetry.mozilla.org/queries/70696?p_org_mozilla_fenix=org_mozilla_firefox#177923)\ud83d\udd12 is the main query that calculates the write success rates for the logins store."}, "logins_store.write_query_error_count": {"commentary": "Read and write success rates for the logins store can be found in [STMO#fenix-logins-and-places-performance-metrics](https://sql.telemetry.mozilla.org/dashboard/fenix-logins-and-places-performance-metrics?p_org_mozilla_fenix=org_mozilla_firefox)\ud83d\udd12.\n\n[STMO#70696](https://sql.telemetry.mozilla.org/queries/70696?p_org_mozilla_fenix=org_mozilla_firefox#177923)\ud83d\udd12 is the main query that calculates the write error rates for the logins store."}}}, "mdn_yari": {"app": {"logo": "https://raw.githubusercontent.com/mdn/yari/main/client/src/assets/m-logo.svg"}}, "mozilla_vpn": {"app": {"featured": true, "logo": "https://raw.githubusercontent.com/mozilla/protocol-assets/60775b3dda4dacb036f9f0cd4f48bf9563ffbc15/logos/mozilla/vpn/logo.svg"}, "metrics": {"sample.addon_cta_clicked": {"commentary": "You may look up addon ids in [here](https://github.com/mozilla-mobile/mozilla-vpn-client/tree/main/addons)."}, "sample.addon_message_state_changed": {"commentary": "[Miroboard for message related Glean events](https://miro.com/app/board/uXjVMVLwsq4=/)\n<img width=\"886\" alt=\"image\" src=\"https://user-images.githubusercontent.com/49305857/233741230-68d62f3c-d941-441b-ab81-c7f8d80f7406.png\">"}, "sample.authentication_inapp_step": {"commentary": "[Miroboard for onboarding related events](https://miro.com/app/board/uXjVMVLwsKo=/)\n<img width=\"1600\" alt=\"image\" src=\"https://user-images.githubusercontent.com/49305857/233741671-1ac72693-3fdb-4480-9a5c-ea1bd550340f.png\">"}, "sample.onboarding_cta_click": {"commentary": "* Please see [Telemetry view:In-app conversion flow](https://miro.com/app/board/uXjVMVLwsKo=/?utm_source=notification&utm_medium=email&utm_campaign=mentions&utm_content=header) for more details.  \n\n<img width=\"950\" alt=\"image\" src=\"https://github.com/mozilla/glean-annotations/assets/49305857/a264f992-3518-4c42-a71f-a10a7c3cc982\">"}}}, "mozregression": {"app": {"logo": "https://raw.githubusercontent.com/mozilla/mozregression/3b4952893b82dd1901181be93f855907fbb12598/docs/images/mozregression_logo_256.png", "commentary": "You can see aggregated counts of some mozregression telemetry on the publically available [mozregression usage dashboard].\n\n[mozregression usage dashboard]: https://observablehq.com/@wlach/mozregression-public-usage-dashboard"}}, "reference_browser": {"app": {"logo": "https://github.com/mozilla-mobile/reference-browser/raw/master/app/src/main/res/mipmap-xxxhdpi/ic_launcher.png", "tags": ["Android"]}}, "sync": {"metrics": {"bookmarks_sync.uid": {"commentary": "This can be used to count the number of distinct Firefox accounts using the bookmarks sync engine on Firefox for Android (Fenix).\n\nSee [STMO#70781](https://sql.telemetry.mozilla.org/queries/70781/?p_org_mozilla_fenix=org_mozilla_firefox)\ud83d\udd12 for an example."}, "history_sync.uid": {"commentary": "This can be used to count the number of distinct Firefox accounts using the history sync engine on Firefox for Android (Fenix).\n\nSee [STMO#70781](https://sql.telemetry.mozilla.org/queries/70781/?p_org_mozilla_fenix=org_mozilla_firefox)\ud83d\udd12 for an example."}, "logins_sync.uid": {"commentary": "This can be used to count the number of distinct Firefox accounts using the logins sync engine on Firefox for Android (Fenix).\n\nSee [STMO#70781](https://sql.telemetry.mozilla.org/queries/70781/?p_org_mozilla_fenix=org_mozilla_firefox)\ud83d\udd12 for an example."}}}, "thunderbird_android": {"app": {"featured": true, "logo": "https://blog.thunderbird.net/files/2023/05/1024x1024@2x.png", "tags": ["Android"], "commentary": "If you consent, Thunderbird for Android sends usage information to Mozilla to understand how it is being used. For example, how many accounts are set up on average. Personally identifiable information such as your email content is never shared with us. We further gather technical information about your device. Given the Android variety, this also helps us determine where to focus optimizations. \n\nWe keep this information for the default retention period of 400 days. Some probes may be collected for a shorter period as indicated below.\n\nSharing this information is important, as it guides our decision on which features to remove or improve. We genuinely want to better understand what users care about and appreciate your willingness to free the inbox.\n\nLearn more at https://support.mozilla.org/kb/thunderbird-android-telemetry and our privacy policy at https://thunderbird.net/privacy"}}, "thunderbird_desktop": {"app": {"featured": true, "logo": "https://blog.thunderbird.net/files/2023/05/1024x1024@2x.png"}}}
